{#
| Variable                               | Type                        | Description                                                            |
|----------------------------------------|-----------------------------|------------------------------------------------------------------------|
| product                                | Product                     |                                                                        |
| product.id                             | int                         |                                                                        |
| product.name                           | string                      |                                                                        |
| product.description                    | string                      | HTML                                                                   |
| product.url                            | string                      |                                                                        |
| product.price                          | float                       |                                                                        |
| product.sale_price                     | float                       |                                                                        |
| product.regular_price                  | float                       |                                                                        |
| product.images                         | array                       |                                                                        |
| product.images[].url                   | string                      |                                                                        |
| product.images[].alt                   | ?string                     |                                                                        |
#}
{% extends "layouts.master" %}

{% block content %}
<div class="min-h-screen bg-white" dir="rtl">
  <!-- Top Header -->
  <div class="w-full text-white py-4 px-6"
       style="
         background-image: url('{{ 'images/headerBG.png'|asset }}');
         background-size: cover;
         background-position: center;
         background-repeat: no-repeat;
         display: flex;
         width: 100%;
         height: 55px;
         padding: 0px 100px;
         justify-content: space-between;
         align-items: center
       ">
    <div class="flex items-center gap-4">
      <img src="{{ 'images/icons/bitcoin-icons_cart-outline.png'|asset }}" 
           alt="Cart" 
           class="w-6 h-6" />
    </div>
    
    <div class="flex items-center justify-center">
      <img src="{{ 'images/logo.png'|asset }}" 
           alt="Alcanta Logo" 
           style="
             width: 132px;
             height: 26px;
             flex-shrink: 0;
             aspect-ratio: 66/13
           " />
    </div>
    
    <div class="flex items-center gap-4">
      <img src="{{ 'images/icons/iconamoon_profile-thin.svg'|asset }}" 
           alt="Profile" 
           class="w-6 h-6" />
    </div>
  </div>

  <!-- Navigation -->
  <div class="w-full flex justify-between items-center px-[70px] py-6">
    <div class="flex items-center gap-2">
      <button onclick="history.back()" class="text-lg">→</button>
      <button onclick="history.back()" class="text-gray-600">رجوع</button>
    </div>
    <div class="text-gray-600">
      المتجر // المجموعة // 
      <span class="font-bold">{{ product.name }}</span>
    </div>
    <div class="text-gray-600">
      ← أغلفة سامسونج
    </div>
  </div>

  <!-- Main Content -->
  <div class="max-w-7xl mx-auto px-8 pt-5 pb-12">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16">
      <!-- Product Images -->
      <div class="space-y-8">
        <!-- Main Product Image -->
        <div class="flex justify-center">
          <img id="main-product-image"
               src="{{ product.images[0].url }}"
               alt="{{ product.name }}"
               class="object-contain"
               style="
                 height: 449px;
                 flex: 1 0 0;
                 aspect-ratio: 1/1
               " />
        </div>
      </div>

      <!-- Product Info -->
      <div class="space-y-8">
        <!-- Model Selector -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">الموديل</label>
          <div class="relative"
               style="
                 border-radius: 8px;
                 border: 1px solid rgba(0, 0, 0, 0.60);
                 background: #FCFCFC;
                 display: flex;
                 height: 37px;
                 width: 175px;
                 padding: 10px;
                 justify-content: space-between;
                 align-items: center;
                 align-self: stretch
               ">
            <select id="model-selector"
                    class="w-full bg-transparent border-none outline-none appearance-none cursor-pointer"
                    style="color: rgba(0, 0, 0, 0.87)">
              <option value="Samsung S24">سامسونج S24</option>
              <option value="Samsung S24 Ultra">سامسونج S24 ألترا</option>
              <option value="Samsung S24 Plus">سامسونج S24 بلس</option>
            </select>
            <span class="text-gray-500 mr-2">▼</span>
          </div>
        </div>

        <!-- Product Title -->
        <h1 class="text-gray-900"
            style="
              color: #000;
              font-family: 'SF Pro Display', Arial, sans-serif;
              font-size: 40px;
              font-style: normal;
              font-weight: 400;
              line-height: 40px;
              margin-bottom: 10px
            ">
          {{ product.name }}
        </h1>

        <!-- Description -->
        <p style="
          font-family: 'Comfortaa', Arial, sans-serif;
          font-size: 15px;
          font-style: normal;
          font-weight: 300;
          line-height: 130.231%;
          background: linear-gradient(90deg, #414141 0%, #999 100%);
          background-clip: text;
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          margin-top: 0px
        ">
          ملمس فاخر. إحساس خالد. — مصنوع من ألكانتارا الإيطالية الأصيلة®
        </p>

        <!-- Price -->
        <div class="text-3xl font-bold text-gray-900">
          {{ product.price|money }}
        </div>

        <!-- Color Selection -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-3">أسود</label>
          <div class="flex gap-4">
            <button id="color-black"
                    class="w-10 h-10 rounded-full border-2 border-gray-900 ring-2 ring-gray-200"
                    style="background-color: #1a1a1a"
                    onclick="selectColor('black')"></button>
            <button id="color-gray"
                    class="w-10 h-10 rounded-full border-2 border-gray-300"
                    style="background-color: #6b7280"
                    onclick="selectColor('gray')"></button>
          </div>
        </div>

        <!-- Add to Cart Button -->
        <div class="flex items-center cursor-pointer"
             style="
               border-radius: 8px;
               border: 1px solid #3C3C3C;
               background: #3C3C3C;
               display: flex;
               height: 45px;
               width: 400px;
               padding: 0px 10px 0px 20px;
               justify-content: space-between;
               align-items: center;
               flex: 1 0 0;
               color: white;
               margin-top: 10px;
               margin-bottom: 10px
             "
             onclick="addToCart()">
          <span class="font-medium text-lg">أضف إلى السلة</span>
          <img src="{{ 'images/icons/uim_lock.png'|asset }}"
               alt="Lock"
               class="w-5 h-5"
               id="lock-icon" />
        </div>

        <!-- Payment Options -->
        <div class="flex items-center gap-3 text-sm text-gray-500"
             style="
               width: 395px;
               justify-content: space-between;
               margin-top: 15px
             ">
          <span class="text-gray-600 font-sf-pro"
                style="padding-right: 17px">
            متوفر دفع تيبي
          </span>
          <img src="{{ 'images/payment/tabby.png'|asset }}" 
               alt="Tabby" 
               style="
                 width: 86px;
                 height: 34px;
                 aspect-ratio: 43/17
               " />
        </div>
      </div>
    </div>

    <!-- Bottom Section -->
    <div class="mt-16 grid grid-cols-1 lg:grid-cols-2 gap-16">
      <!-- Product Information -->
      <div class="space-y-6">
        <h2 style="
          color: #000;
          font-family: 'SF Pro Display', Arial, sans-serif;
          font-size: 30px;
          font-style: normal;
          font-weight: 400;
          line-height: 40px
        ">
          معلومات المنتج
        </h2>
        
        <div class="space-y-4">
          <div>
            <h3 class="mb-2"
                style="
                  font-family: 'Comfortaa', Arial, sans-serif;
                  font-size: 14px;
                  font-style: normal;
                  font-weight: 300;
                  line-height: 130.231%;
                  background: linear-gradient(90deg, #414141 0%, #999 100%);
                  background-clip: text;
                  -webkit-background-clip: text;
                  -webkit-text-fill-color: transparent
                ">
              الموديلات المتوافقة:
            </h3>
            <ul class="space-y-1"
                style="
                  font-family: 'Comfortaa', Arial, sans-serif;
                  font-size: 14px;
                  font-style: normal;
                  font-weight: 300;
                  line-height: 130.231%;
                  background: linear-gradient(90deg, #414141 0%, #999 100%);
                  background-clip: text;
                  -webkit-background-clip: text;
                  -webkit-text-fill-color: transparent
                ">
              <li>• Samsung Galaxy S24 / S24+ / S24 Ultra</li>
              <li>• متوفر أيضاً لسلسلة S23</li>
            </ul>
          </div>
          
          <div>
            <h3 class="mb-2"
                style="
                  font-family: 'Comfortaa', Arial, sans-serif;
                  font-size: 14px;
                  font-style: normal;
                  font-weight: 300;
                  line-height: 130.231%;
                  background: linear-gradient(90deg, #414141 0%, #999 100%);
                  background-clip: text;
                  -webkit-background-clip: text;
                  -webkit-text-fill-color: transparent
                ">
              المادة:
            </h3>
            <ul class="space-y-1"
                style="
                  font-family: 'Comfortaa', Arial, sans-serif;
                  font-size: 14px;
                  font-style: normal;
                  font-weight: 300;
                  line-height: 130.231%;
                  background: linear-gradient(90deg, #414141 0%, #999 100%);
                  background-clip: text;
                  -webkit-background-clip: text;
                  -webkit-text-fill-color: transparent
                ">
              <li>• جلد نباتي فاخر بنسيج مستوحى من ألكانتارا</li>
              <li>• بطانة ميكروفايبر ناعمة لحماية من الخدوش</li>
            </ul>
          </div>
          
          <div>
            <h3 class="mb-2"
                style="
                  font-family: 'Comfortaa', Arial, sans-serif;
                  font-size: 14px;
                  font-style: normal;
                  font-weight: 300;
                  line-height: 130.231%;
                  background: linear-gradient(90deg, #414141 0%, #999 100%);
                  background-clip: text;
                  -webkit-background-clip: text;
                  -webkit-text-fill-color: transparent
                ">
              التصميم:
            </h3>
            <ul class="space-y-1"
                style="
                  font-family: 'Comfortaa', Arial, sans-serif;
                  font-size: 14px;
                  font-style: normal;
                  font-weight: 300;
                  line-height: 130.231%;
                  background: linear-gradient(90deg, #414141 0%, #999 100%);
                  background-clip: text;
                  -webkit-background-clip: text;
                  -webkit-text-fill-color: transparent
                ">
              <li>• مظهر رفيع جداً مع حماية كاملة محيطة</li>
              <li>• فتحات دقيقة للكاميرا والأزرار والمنافذ</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Thumbnail Images -->
      <div class="pb-8">
        <div class="border-t border-gray-200 pt-0">
          <div class="flex flex-wrap justify-start gap-6 pr-2">
            {% for image in product.images %}
              <img src="{{ image.url }}"
                   alt="{{ image.alt|default('Product view') }}"
                   class="w-24 h-24 object-cover rounded-lg cursor-pointer thumbnail-image"
                   data-index="{{ loop.index0 }}"
                   onclick="changeMainImage({{ loop.index0 }})" />
            {% endfor %}
          </div>
        </div>
      </div>
    </div>

    <!-- Image Section -->
    <div class="mt-16 w-full flex justify-center">
      <img src="{{ 'images/imageSecation3.png'|asset }}"
           alt="Product lifestyle display"
           class="w-full object-contain"
           style="
             max-width: 100%;
             display: block;
             margin: 0 auto
           " />
    </div>
  </div>
</div>

<script>
let selectedColor = 'black';
let selectedImageIndex = 0;

function selectColor(color) {
  selectedColor = color;
  
  // Update button styles
  document.getElementById('color-black').className = 
    color === 'black' ? 'w-10 h-10 rounded-full border-2 border-gray-900 ring-2 ring-gray-200' : 'w-10 h-10 rounded-full border-2 border-gray-300';
  document.getElementById('color-gray').className = 
    color === 'gray' ? 'w-10 h-10 rounded-full border-2 border-gray-900 ring-2 ring-gray-200' : 'w-10 h-10 rounded-full border-2 border-gray-300';
}

function changeMainImage(index) {
  selectedImageIndex = index;
  const mainImage = document.getElementById('main-product-image');
  const thumbnailImages = document.querySelectorAll('.thumbnail-image');
  
  // Update main image
  mainImage.src = thumbnailImages[index].src;
  
  // Update thumbnail selection
  thumbnailImages.forEach((img, i) => {
    if (i === index) {
      img.classList.add('ring-2', 'ring-blue-500');
    } else {
      img.classList.remove('ring-2', 'ring-blue-500');
    }
  });
}

function addToCart() {
  const lockIcon = document.getElementById('lock-icon');
  
  // Add animation effect
  lockIcon.style.transition = 'all 0.3s ease';
  lockIcon.style.transform = 'scale(1.1) rotate(5deg)';
  
  setTimeout(() => {
    lockIcon.style.transform = 'scale(1) rotate(0deg)';
  }, 300);
  
  // Here you would typically call Salla's add to cart function
  // salla.cart.addItem(productId, quantity, options);
  console.log('Adding to cart:', {
    productId: {{ product.id }},
    model: document.getElementById('model-selector').value,
    color: selectedColor
  });
}

// Initialize first thumbnail as selected
document.addEventListener('DOMContentLoaded', function() {
  const firstThumbnail = document.querySelector('.thumbnail-image');
  if (firstThumbnail) {
    firstThumbnail.classList.add('ring-2', 'ring-blue-500');
  }
});
</script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap');

.font-sf-pro {
  font-family: 'SF Pro Display', Arial, sans-serif;
}

.thumbnail-image:hover {
  opacity: 0.8;
  transition: opacity 0.2s ease;
}

#lock-icon {
  transition: all 0.3s ease;
}

#lock-icon:hover {
  transform: scale(1.1);
}
</style>
{% endblock %} 