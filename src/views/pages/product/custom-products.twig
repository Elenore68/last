{% extends "layouts.master" %}

{% block content %}
<div class="container mx-auto px-4 py-8" dir="rtl">
  <h1 class="text-3xl font-bold text-center mb-8">منتجات ألكانتارا</h1>
  
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
    
    <!-- iPhone Case -->
    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
      <div class="p-6">
        <h2 class="text-xl font-semibold mb-4">غلاف آيفون 15 برو – أسود</h2>
        <p class="text-gray-600 mb-4">ملمس فاخر. إحساس خالد. — مصنوع من ألكانتارا الإيطالية الأصيلة®</p>
        <div class="flex justify-between items-center">
          <span class="text-2xl font-bold">250 ريال</span>
          <button onclick="showProductPage('iphone')" 
                  class="bg-gray-900 text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors">
            عرض المنتج
          </button>
        </div>
      </div>
      <div class="h-48 bg-gray-100 flex items-center justify-center">
        <img src="{{ 'images/product/iphone2.png'|asset }}" 
             alt="iPhone Case" 
             class="h-32 object-contain" />
      </div>
    </div>
    
    <!-- Samsung Case -->
    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
      <div class="p-6">
        <h2 class="text-xl font-semibold mb-4">غلاف سامسونج S24 – أسود</h2>
        <p class="text-gray-600 mb-4">ملمس فاخر. إحساس خالد. — مصنوع من ألكانتارا الإيطالية الأصيلة®</p>
        <div class="flex justify-between items-center">
          <span class="text-2xl font-bold">250 ريال</span>
          <button onclick="showProductPage('samsung')" 
                  class="bg-gray-900 text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors">
            عرض المنتج
          </button>
        </div>
      </div>
      <div class="h-48 bg-gray-100 flex items-center justify-center">
        <img src="{{ 'images/product/image 27.png'|asset }}" 
             alt="Samsung Case" 
             class="h-32 object-contain" />
      </div>
    </div>
    
  </div>
  
  <div class="text-center mt-8">
    <a href="/" class="text-gray-600 hover:text-gray-800">
      ← العودة للصفحة الرئيسية
    </a>
  </div>
</div>

<!-- Product Modal -->
<div id="product-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
  <div class="flex items-center justify-center min-h-screen p-4">
    <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto" dir="rtl">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h2 id="modal-title" class="text-2xl font-bold">غلاف آيفون 15 برو – أسود</h2>
          <button onclick="closeProductModal()" class="text-gray-500 hover:text-gray-700 text-2xl">
            ×
          </button>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <!-- Product Images -->
          <div class="space-y-4">
            <div class="flex justify-center">
              <img id="modal-main-image"
                   src="{{ 'images/product/iphone2.png'|asset }}"
                   alt="Product"
                   class="object-contain"
                   style="height: 400px;" />
            </div>
            <div class="flex gap-2 justify-center">
              <img src="{{ 'images/product/iphone2.png'|asset }}" 
                   alt="View 1" 
                   class="w-16 h-16 object-cover rounded cursor-pointer border-2 border-gray-300"
                   onclick="changeModalImage('{{ 'images/product/iphone2.png'|asset }}')" />
              <img src="{{ 'images/product/iphone3.png'|asset }}" 
                   alt="View 2" 
                   class="w-16 h-16 object-cover rounded cursor-pointer border-2 border-gray-300"
                   onclick="changeModalImage('{{ 'images/product/iphone3.png'|asset }}')" />
              <img src="{{ 'images/product/iphone4.png'|asset }}" 
                   alt="View 3" 
                   class="w-16 h-16 object-cover rounded cursor-pointer border-2 border-gray-300"
                   onclick="changeModalImage('{{ 'images/product/iphone4.png'|asset }}')" />
              <img src="{{ 'images/product/iphone5.png'|asset }}" 
                   alt="View 4" 
                   class="w-16 h-16 object-cover rounded cursor-pointer border-2 border-gray-300"
                   onclick="changeModalImage('{{ 'images/product/iphone5.png'|asset }}')" />
            </div>
          </div>
          
          <!-- Product Info -->
          <div class="space-y-6">
            <!-- Model Selector -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">الموديل</label>
              <div class="relative"
                   style="
                     border-radius: 8px;
                     border: 1px solid rgba(0, 0, 0, 0.60);
                     background: #FCFCFC;
                     display: flex;
                     height: 37px;
                     width: 175px;
                     padding: 10px;
                     justify-content: space-between;
                     align-items: center;
                     align-self: stretch
                   ">
                <select id="modal-model-selector"
                        class="w-full bg-transparent border-none outline-none appearance-none cursor-pointer"
                        style="color: rgba(0, 0, 0, 0.87)">
                  <option value="iPhone 15 Pro">آيفون 15 برو</option>
                  <option value="iPhone 15 Pro Max">آيفون 15 برو ماكس</option>
                  <option value="iPhone 15">آيفون 15</option>
                </select>
                <span class="text-gray-500 mr-2">▼</span>
              </div>
            </div>

            <!-- Description -->
            <p style="
              font-family: 'Comfortaa', Arial, sans-serif;
              font-size: 15px;
              font-style: normal;
              font-weight: 300;
              line-height: 130.231%;
              background: linear-gradient(90deg, #414141 0%, #999 100%);
              background-clip: text;
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent;
              margin-top: 0px
            ">
              ملمس فاخر. إحساس خالد. — مصنوع من ألكانتارا الإيطالية الأصيلة®
            </p>

            <!-- Price -->
            <div class="text-3xl font-bold text-gray-900">
              250 ريال
            </div>

            <!-- Color Selection -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-3">أسود</label>
              <div class="flex gap-4">
                <button id="modal-color-black"
                        class="w-10 h-10 rounded-full border-2 border-gray-900 ring-2 ring-gray-200"
                        style="background-color: #1a1a1a"
                        onclick="selectModalColor('black')"></button>
                <button id="modal-color-gray"
                        class="w-10 h-10 rounded-full border-2 border-gray-300"
                        style="background-color: #6b7280"
                        onclick="selectModalColor('gray')"></button>
              </div>
            </div>

            <!-- Add to Cart Button -->
            <div class="flex items-center cursor-pointer"
                 style="
                   border-radius: 8px;
                   border: 1px solid #3C3C3C;
                   background: #3C3C3C;
                   display: flex;
                   height: 45px;
                   width: 100%;
                   padding: 0px 10px 0px 20px;
                   justify-content: space-between;
                   align-items: center;
                   color: white;
                   margin-top: 10px;
                   margin-bottom: 10px
                 "
                 onclick="addToCart()">
              <span class="font-medium text-lg">أضف إلى السلة</span>
              <img src="{{ 'images/icons/uim_lock.png'|asset }}"
                   alt="Lock"
                   class="w-5 h-5"
                   id="modal-lock-icon" />
            </div>

            <!-- Payment Options -->
            <div class="flex items-center gap-3 text-sm text-gray-500"
                 style="
                   width: 100%;
                   justify-content: space-between;
                   margin-top: 15px
                 ">
              <span class="text-gray-600 font-sf-pro"
                    style="padding-right: 17px">
                متوفر دفع تيبي
              </span>
              <img src="{{ 'images/payment/tabby.png'|asset }}" 
                   alt="Tabby" 
                   style="
                     width: 86px;
                     height: 34px;
                     aspect-ratio: 43/17
                   " />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
let currentProductType = 'iphone';
let selectedModalColor = 'black';

function showProductPage(productType) {
  currentProductType = productType;
  const modal = document.getElementById('product-modal');
  const title = document.getElementById('modal-title');
  const mainImage = document.getElementById('modal-main-image');
  const modelSelector = document.getElementById('modal-model-selector');
  
  if (productType === 'iphone') {
    title.textContent = 'غلاف آيفون 15 برو – أسود';
    mainImage.src = '{{ 'images/product/iphone2.png'|asset }}';
    modelSelector.innerHTML = `
      <option value="iPhone 15 Pro">آيفون 15 برو</option>
      <option value="iPhone 15 Pro Max">آيفون 15 برو ماكس</option>
      <option value="iPhone 15">آيفون 15</option>
    `;
  } else {
    title.textContent = 'غلاف سامسونج S24 – أسود';
    mainImage.src = '{{ 'images/product/image 27.png'|asset }}';
    modelSelector.innerHTML = `
      <option value="Samsung S24">سامسونج S24</option>
      <option value="Samsung S24 Ultra">سامسونج S24 ألترا</option>
      <option value="Samsung S24 Plus">سامسونج S24 بلس</option>
    `;
  }
  
  modal.classList.remove('hidden');
  document.body.style.overflow = 'hidden';
}

function closeProductModal() {
  const modal = document.getElementById('product-modal');
  modal.classList.add('hidden');
  document.body.style.overflow = 'auto';
}

function changeModalImage(src) {
  document.getElementById('modal-main-image').src = src;
}

function selectModalColor(color) {
  selectedModalColor = color;
  
  document.getElementById('modal-color-black').className = 
    color === 'black' ? 'w-10 h-10 rounded-full border-2 border-gray-900 ring-2 ring-gray-200' : 'w-10 h-10 rounded-full border-2 border-gray-300';
  document.getElementById('modal-color-gray').className = 
    color === 'gray' ? 'w-10 h-10 rounded-full border-2 border-gray-900 ring-2 ring-gray-200' : 'w-10 h-10 rounded-full border-2 border-gray-300';
}

function addToCart() {
  const lockIcon = document.getElementById('modal-lock-icon');
  const model = document.getElementById('modal-model-selector').value;
  
  // Add animation effect
  lockIcon.style.transition = 'all 0.3s ease';
  lockIcon.style.transform = 'scale(1.1) rotate(5deg)';
  
  setTimeout(() => {
    lockIcon.style.transform = 'scale(1) rotate(0deg)';
  }, 300);
  
  console.log('Adding to cart:', {
    productType: currentProductType,
    model: model,
    color: selectedModalColor
  });
  
  // Here you would typically call Salla's add to cart function
  // salla.cart.addItem(productId, quantity, options);
}

// Close modal when clicking outside
document.getElementById('product-modal').addEventListener('click', function(e) {
  if (e.target === this) {
    closeProductModal();
  }
});

// Close modal on escape key
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeProductModal();
  }
});
</script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap');

.font-sf-pro {
  font-family: 'SF Pro Display', Arial, sans-serif;
}

#modal-lock-icon {
  transition: all 0.3s ease;
}

#modal-lock-icon:hover {
  transform: scale(1.1);
}
</style>
{% endblock %} 